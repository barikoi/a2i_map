<div class="content map-content map-content-with-search">
    <div class="animated fadeIn">

        <div class="row">
            <div ng-class="{'col-md-8': polygonSearchLeftEight,  'col-md-12': polygonSearchLeftFull}">
                <div class="card">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-md-8">
                                <div id="search-from-form">
                                    <input type="text" class="form-control form-control-sm input-sm" name="search"
                                        autocomplete="off" placeholder="Search.." typeahead-on-select='onSelect($item)'
                                        typeahead="user.Address for user in users($viewValue)" ng-model="selecting"
                                        aria-autoc1omplete="list" ng-model="selecting" ng-focus="focus=true;blur=false;"
                                        ng-blur="blur=true;focus=false;" ng-model-options="{ debounce: 400 }">
                                </div>

                            </div>
                            <div class="col-md-4">
                                <i class="fa fa-columns pull-right" ng-click="polygonSearchCollapse()"></i>
                            </div>
                        </div>
                    </div>
                    <div class="gmap_unix card-body" bs-loading-overlay bs-loading-overlay-reference-id="first">
                        <leaflet class="map map-view" defaults="defaults" center="center" markers="markers"
                            controls="controls" layers="layers" event-broadcast="events" geojson="geojson" width='100%'>
                            <!-- <button class="btn btn-sm btn-danger btn-round" style="float:right;top: 4em;left: 3em;z-index:401;background:rgba(255,255,255,.15);" ng-click="openSlide()"><i class="material-icons" style="font-weight: bolder;color: black;padding-right: 1em;">
                                                    arrow_back_ios
                                                </i></button> -->
                        </leaflet>
                    </div>
                </div>
                <!-- /# card -->
            </div>
            <!-- /# column -->
            <div
                ng-class="{'col-md-4': polygonSearchRight, 'hide-div':polygonSearchLeftFull, 'show-div':polygonSearchLeftEight }">
                <div class="card">
                    <!-- <div class="card-header">
                        <input class="form-control form-control-sm input-sm" type="text" ng-model="query" name=""
                            placeholder="Search">
    
                    </div> -->
                    <!-- bs-loading-overlay bs-loading-overlay-reference-id="first" -->
                    <div class="card-body card-block">

                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active show" id="home-tab" data-toggle="tab" href=""
                                    data-target="#polygonsearchfilter" role="tab" aria-controls="home"
                                    aria-selected="true">Filter</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href=""
                                    data-target="#polygonsearchresults" role="tab" aria-controls="profile"
                                    aria-selected="false">Results</a>
                            </li>
                        </ul>

                        <div class="tab-content mt-3" id="myTabContent">
                            <div class="tab-pane fade active show" id="polygonsearchfilter" role="tabpanel"
                                aria-labelledby="home-tab">

                                <!-- <div class="row form-group">
                                        <div class="col-md-12">
                                            <input type="text" ng-model="query" class="form-control form-control-sm input-sm"
                                                placeholder="Search">
                                        </div>
                                    </div> -->

                                <div class="form-group">
                                    <div class="input-group">
                                        <select ng-model="area" name="area" ng-options="opt.name for opt in areas"
                                            ng-change="set_area(area)" class="form-control form-control-sm ">
                                            <option value="" selected>Select Area</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="input-group">
                                        <select ng-model="subcategory" name="subcategory"
                                            ng-options="subcat.subtype for subcat in subcategories"
                                            ng-change="set_subType(area.name, subcategory.subtype)"
                                            class="form-control form-control-sm ">
                                            <option value="" selected>Select Sub Category</option>
                                        </select>
                                    </div>
                                </div>

                                <h5 ng-if="total">Total: {{total}}</h5>

                            </div>

                            <div class="tab-pane fade show" id="polygonsearchresults" role="tabpanel"
                                aria-labelledby="profile-tab">

                                <div class="row mb-4">
                                    <div class="col-md-12">
                                        <input type="text" ng-model="query"
                                            class="form-control form-control-sm input-sm" placeholder="Search">
                                    </div>
                                </div>

                                <div class="polygon-search-overflow">
                                    <div ng-repeat="nb in markers| filter: query " pagination-id="psearchold">
                                        <!-- <div id="elm{{nb.id}}" ng-click="changeCenter(nb)"> -->
                                        <div class="card" ng-click="changeCenter(nb)">
                                            <div class="card-header">
                                                <small><span
                                                        class="badge badge-info float-left mt-1">{{nb.ptype}}</span></small>
                                                &nbsp
                                                <small><span
                                                        class="badge badge-info float-left mt-1">{{nb.subtype}}</span>
                                                </small>
                                                <small class="float-right"><i class="ti-user"></i>
                                                    <span>{{nb.userID}}</span></small>
                                            </div>
                                            <div class="card-body" style="padding: 10px 0 0 10px;">
                                                <div class="mx-auto d-block">
                                                    <div class="mt-1 ng-binding">
                                                        <i class="ti-home"></i> <span
                                                            class="ng-binding">{{nb.Address}}</span><br>
                                                        <i class="ti-direction"></i> <span class="ng-binding">Area:
                                                            {{nb.area}}</span><br>

                                                        <i class="ti-calendar"></i> <span class="ng-binding">Date:
                                                            </label>{{nb.updated_at.split(' ', 2)[0]}}</span><br>
                                                        <br>
                                                        <!-- <i class="ti-info"></i> <span>{{userinfo.created_at}}</span><br> -->
                                                        </address>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                </div>
                <!-- /# card -->
            </div>
            <!-- /# column -->

        </div>
        <!-- /# row -->

    </div><!-- .animated -->
</div><!-- .content -->
<div class="clearfix"></div>